#Programmet b칬rjar med att fr친ga anv칛ndaren om de vill ha en tutorial.
#Om anv칛ndaren v칛ljer "ja" f친r de en kort f칬rklaring av spelet och dess funktioner.
#Om anv칛ndaren v칛ljer "nej" f친r de inte en tutorial
while True:#loopen g칬r att du kommer f친 tillbaka fr친gan fram till att du valt "ja" eller "nej"
    tutorial = input("Vill du ha en tutorial? (ja/nej): ").lower()
    if tutorial == "ja":
        print("""\nHej och v칛lkommen till bussen!\nDetta 칛r ett spel d칛r du som anv칛ndare 칛r en busschaff칬r.
Spelet g친r ut p친 att plocka upp och sl칛ppa av passagerare.
Det finns m친nga funktioner som l친ter dig ber칛kna olika 
v칛rden p친 passagerarna. Alternativen finns i menyn nedan.
Lycka till!""")

        break
    elif tutorial == "nej":
        print("\nOkej, du vill inte ha en tutorial.")
        break
    else:
        print("Du m친ste svara ja eller nej")

#Definierar en klass som representerar en passagerare p친 bussen.
#Varje passagerare har ett namn, 친lder och k칬n.
#Andra funktionen printar ut namn, 친lder och k칬n
class Person:
    def __init__(self, namn, 친lder, k칬n):
        self.namn = namn
        self.친lder = 친lder
        self.k칬n = k칬n

    def __str__(self):
        return f"{self.namn} 칛r {self.k칬n} och {self.친lder} 친r gammal."

#L친ter anv칛ndaren mata in uppgifter om en ny passagerare
#och l칛gger till dem i passagerarlistan om bussen inte 칛r full.
#Programmet komenterar p친 inmatningsfel.
def plockaUpp(passagerare, max_passagerare):
    while True:
        try:
            if len(passagerare) < max_passagerare:
                namn = input("Ange passagerarens namn: ")
                if not namn.isalpha():
                        print("Namnet f친r bara inneh친lla bokst칛ver. F칬rs칬k igen.")
                        continue
                while True:  
                    친lder_str = input("Ange passagerarens 친lder: ")
                    try:
                        친lder = int(친lder_str)
                        if 0 < 친lder <= 100:
                            break
                        else:
                            print("칀ldern f친r inte vara mer 칛n 100 eller mindre 칛n 1. F칬rs칬k igen.")
                    except ValueError:
                        print("Felaktig inmatning. F칬rs칬k igen med ett heltal.")

                while True:
                    k칬n = input("Ange passagerarens k칬n man eller kvinna: ")
                    k칬n = k칬n.lower()
                    if k칬n in ["man", "kvinna"]:
                        break
                    else:
                        print("Felaktig inmatning. F칬rs칬k igen med man eller kvinna")

                passager = Person(namn, 친lder, k칬n)
                passagerare.append(passager)
                print(f"{namn} har plockats upp p친 bussen.")
                break
            else:
                print("Bussen 칛r full. Passageraren kan inte stiga p친.")
                break
        except ValueError:
            print("N친got gick fel. F칬rs칬k igen.")

#L친ter anv칛ndaren v칛lja en passagerare som ska stiga av bussen och tar bort den fr친n listan.
# L친ter anv칛ndaren v칛lja en passagerare som ska stiga av bussen och tar bort den fr친n listan.
def g친Av(passagerare):
    if not passagerare:
        print("Inga passagerare p친 bussen.")
        return

    skrivUt(passagerare)  

    while True:
        namn = input("Ange passagerarens namn som stiger av bussen:")
        if namn.lower() == "vip":
            print("VIP-status aktiverad! Alla passagerare har stigit av bussen.\n")
            print("""                                    _.-=._-         _
                         _.-="   _-          | ||"""""""---._______     __..
             ___.==="..-.______-,,,,,,,,,,,,`-''----" """""       """""  __'
      __.--""     __        ,'                   o \           __        [__|
 __-""=======.--""  ""--.=================================.--""  ""--.=======:
]       [w] : /        \ : |========================|    : /        \ :  [w] :
V___________:|          |: |========================|    :|          |:   _-"
 V__________: \        / :_|=======================/_____: \        / :__-"
 -----------'  "-____-"  `-------------------------------'  "-____-"  
 """)
            passagerare.clear()  
            return
                
        for person in passagerare:
            if person.namn == namn:
                print(f"{namn} har stigit av bussen.")
                passagerare.remove(person)
                return
            
        print(f"{namn} finns inte p친 bussen.")
        print("Denna passageraren finns inte p친 bussen.... F칬rs칬k igen")


#Listar alla passagerare p친 bussen.
def skrivUt(passagerare):
    print("Passagerare p친 bussen:")
    for person in passagerare:
        print(person)

#R칛knar ut den sammanlaga 친ldern av alla i listan.
def sammanlagd칀lder(passagerare):
    total_친lder = sum(person.친lder for person in passagerare)
    print("Den sammanlagda 친ldern p친 passagerarna 칛r:", total_친lder)

#R칛knar ut medel친ldern av alla i listan.
#Avrundar resultat till heltal.
def medel칀lder(passagerare):
        total_친lder = sum(person.친lder for person in passagerare)
        if len(passagerare) > 0:
            medel_친lder = total_친lder / len(passagerare)
        else:
            print("Det finns inte n친gra passagerare p친 bussen")

        print("Medel친ldern p친 passagerarna 칛r:", round(medel_친lder))

#Skriver ut 칛ldsta personen fr친n listan.
def 칛ldst(passagerare):
    칛ldsta_person = None
    max_친lder = -1
    for person in passagerare:
        if person.친lder > max_친lder:
            max_친lder = person.친lder
            칛ldsta_person = person
    if 칛ldsta_person:
        print(f"츿ldsta personen p친 bussen 칛r: {칛ldsta_person.namn}, 친lder: {칛ldsta_person.친lder}")
    else:
        print("Det finns inga passagerare p친 bussen.")

#Skriver ut 칛ldsta mammen fr친n listan.
def 칛ldst_man(passagerare):
    칛ldsta_man = None
    max_친lder = -1
    for person in passagerare:
        if person.k칬n.lower() == "man" and person.친lder > max_친lder:
            max_친lder = person.친lder
            칛ldsta_man = person
    if 칛ldsta_man:
        print(f"츿ldsta mannen p친 bussen 칛r: {칛ldsta_man.namn}, 친lder: {칛ldsta_man.친lder}")
    else:
        print("Det finns ingen manlig passagerare p친 bussen.")

#Skriver ut yngsta kvinnan fr친n listan.
def yngst_kvinna(passagerare):
    yngsta_kvinna = None
    min_친lder = float('inf')
    for person in passagerare:
        if person.k칬n.lower() == "kvinna" and person.친lder < min_친lder:
            min_친lder = person.친lder
            yngsta_kvinna = person
    if yngsta_kvinna:
        print(f"Yngsta kvinnan p친 bussen 칛r: {yngsta_kvinna.namn}, 친lder: {yngsta_kvinna.친lder}")
    else:
        print("Det finns ingen kvinnlig passagerare p친 bussen.")

#Anv칛ndaren f친r tre altenativ(칛lsta passagerare, 칛ldata man, yngsta kvinna).
#Vid val av funktion 1, 2 eller 3 startar en av de tre 칬verliggande funktioner.
def 친ld_alternativ(passagerare):
    alternativ = input("V칛lj ett alternativ:\n1. Hitta 칛ldsta personen\n2. Hitta 칛ldsta mannen\n3. Hitta yngsta kvinnan\n")
    if alternativ == "1":
        칛ldst(passagerare)
    elif alternativ == "2":
        칛ldst_man(passagerare)
    elif alternativ == "3":
        yngst_kvinna(passagerare)
    else:
        print("Ogiltigt alternativ.")

#Sorterar endast listan efter namn eller 친lder.
#(Funktionen skrivUt(passagerare)(3) listar passagerarna)
def busSort(passagerare):
    sortering = input("Vill du sortera efter namn eller 친lder?: ")
    if sortering.lower() == "namn":
        passagerare.sort(key=lambda x: x.namn)
        print("Bussen har sorterats efter namn.")
    elif sortering.lower() == "친lder":
        passagerare.sort(key=lambda x: x.친lder)
        print("Bussen har sorterats efter 친lder.")
    else:
        print("Ogiltigt val.")

#Anv칛ndaren anger ett 친ldersspann som listan sorteras efter.
def hittaPassagerare(passagerare):
    while True:
        try:
            min_친lder = int(input("Ange l칛gsta 친ldern i spannet: "))
            max_친lder = int(input("Ange h칬gsta 친ldern i spannet: "))
            break  
        except ValueError:
            print("Felaktig inmatning. Ange endast heltal.")

    passager_inom_spann = []
    for person in passagerare:
        if min_친lder <= person.친lder <= max_친lder:
            passager_inom_spann.append(person)
    if passager_inom_spann:
        print(f"Passagerare inom 친ldersspannet {min_친lder}-{max_친lder}:")
        for person in passager_inom_spann:
            print(person)
    else:
        print("Inga passagerare finns inom det angivna 친ldersspannet.")

#Anv칛ndaren kan peta p친 passagerae, olika resultat beror p친 villket 친ldersspann passageraren befinner sig i.
#Om personen befinner sig i 친ldersspannet 70 till 100 s친 blir personen borttagen fr친n bussen.
def peta(passagerare):
    skrivUt(passagerare)
    namn = input("Ange passagerarens namn som du vill peta p친:")
    for person in passagerare:
        if person.namn == namn:
            친lder = person.친lder
            if 친lder >= 1 and 친lder <= 5:
                print(f"{person.namn} skriker n칛r hen bli petad p친.")
            elif 친lder > 5 and 친lder <= 10:
                print(f"Jag ber칛ttar f칬r mamma, s칛ger {person.namn} n칛r hen bli petad p친.")
            elif 친lder > 10 and 친lder <= 30:
                print(f"{person.namn} skrattar n칛r hen bli petad p친.")
            elif 친lder > 30 and 친lder <= 50:
                print(f"{person.namn} reagerar surt n칛r hen bli petad p친.")
            elif 친lder > 50 and 친lder <= 70:
                print(f"L칛mna mig ifred, s칛ger {person.namn} n칛r hen bli petad p친")
            elif 친lder > 70 and 친lder <= 100:
                print(f"R.I.P f칬r {person.namn}---游游游游游---\nDet blev ingen l친ng busstur f칬r {person.namn} hen sl칛pptes av vid sidan v칛gen")
                passagerare.remove(person)
                print()
                skrivUt(passagerare)
            return
    print(f"{namn} finns inte p친 bussen")

#Huvudpogrammet och menyn. Anger funktionerna en siffra.
def main():
    passagerare = []
    max_passagerare = 25
    while True:

        print("""
                      MENY alternativ
1. Plocka upp ny passagerare   6. 칀lder passagerare(min/max)
2. Sl칛pp av passagerare        7. Sortera passagerare
3. Lista passagerare           8. Lista passagerare inom valt 친ldersspann
4. Ber칛kna sammanlagd 친lder    9. Peta p친 passagerare
5. Ber칛kna medel친ldern         Q. Avsluta
        """)

        menyVal = input("-> ").upper()

        if menyVal == "1":
            plockaUpp(passagerare, max_passagerare)
        elif menyVal == "2":
            g친Av(passagerare)
        elif menyVal == "3":
            skrivUt(passagerare)
        elif menyVal == "4":
            sammanlagd칀lder(passagerare)
        elif menyVal == "5":
            medel칀lder(passagerare)
        elif menyVal == "6":
            친ld_alternativ(passagerare)
        elif menyVal == "7":
            busSort(passagerare)
        elif menyVal == "8":
            hittaPassagerare(passagerare)
        elif menyVal == "9":
            peta(passagerare)
        elif menyVal == "Q":  
            break



if __name__ == "__main__":
    main()
